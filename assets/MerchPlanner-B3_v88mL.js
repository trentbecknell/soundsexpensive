import{r as M,j as s}from"./flags-CTfa8zv0.js";import{g as K}from"./testerContact-Bnwc-oM4.js";import{l as W,s as Z,D as ee,p as te}from"./pricing-RT0dD_qj.js";const se=[{category:"T-Shirt",defaultMethod:"Screen Print",baseCostRangeUSD:[6,10],notes:"Bulk screen print, 1-2 color front, 1 color back"},{category:"Hoodie",defaultMethod:"Screen Print",baseCostRangeUSD:[18,28],notes:"Midweight hoodie, 1-2 color front"},{category:"Hat",defaultMethod:"Embroidery",baseCostRangeUSD:[9,14],notes:"Dad hat or snapback, front embroidery"},{category:"Sticker Pack",defaultMethod:"Sticker Die-Cut",baseCostRangeUSD:[.25,.6],notes:"3-5 small die-cut stickers per pack"},{category:"Tote",defaultMethod:"Screen Print",baseCostRangeUSD:[3,6],notes:"Canvas tote, 1 color print"},{category:"Poster",defaultMethod:"Sublimation",baseCostRangeUSD:[1,2.5],notes:"11x17 digital print"},{category:"Vinyl",defaultMethod:"Vinyl Pressing",baseCostRangeUSD:[8,15],notes:'12" black, basic jacket, 100-300 MOQ typical'},{category:"CD",defaultMethod:"CD Duplication",baseCostRangeUSD:[1.2,2.2],notes:"Jacket/wallet, 100 MOQ typical"}],S=[{id:"v-printful",name:"Printful",methods:["DTG","Embroidery","Sublimation"],categories:["T-Shirt","Hoodie","Hat","Poster"],dropship:!0,ecoOptions:!0,avgLeadDays:5,url:"https://www.printful.com"},{id:"v-printify",name:"Printify",methods:["DTG","Embroidery","Sublimation"],categories:["T-Shirt","Hoodie","Hat","Poster"],dropship:!0,avgLeadDays:7,url:"https://printify.com"},{id:"v-custom-ink",name:"Custom Ink",methods:["Screen Print","Embroidery"],categories:["T-Shirt","Hoodie","Hat","Tote"],minOrder:12,avgLeadDays:10,url:"https://www.customink.com"},{id:"v-sticker-mule",name:"Sticker Mule",methods:["Sticker Die-Cut"],categories:["Sticker Pack"],avgLeadDays:5,url:"https://www.stickermule.com"},{id:"v-local-screen",name:"Local Screen Printer",methods:["Screen Print"],categories:["T-Shirt","Hoodie","Tote"],location:"Your City",minOrder:24,avgLeadDays:7,url:"https://example.com"},{id:"v-vinyl-press",name:"Vinyl Press Co",methods:["Vinyl Pressing"],categories:["Vinyl"],minOrder:100,avgLeadDays:45,url:"https://example-vinyl.com"},{id:"v-cd-dup",name:"CD Duplication Co",methods:["CD Duplication"],categories:["CD"],minOrder:100,avgLeadDays:10,url:"https://example-cd.com"}];function C(){return Math.random().toString(36).slice(2,9)}function j(u){const d=se.find(c=>c.category===u);if(!d)throw new Error(`Unknown merch category: ${u}`);return d}function D(u,d){const[c,m]=u.baseCostRangeUSD;return Math.round((c+m)/2*100)/100}function q(u,d,c){const m=[],n=j("Sticker Pack"),g=Math.max(50,Math.ceil(c*1.1));m.push({id:C(),category:"Sticker Pack",method:n.defaultMethod,quantity:g,targetUnitCostUSD:D(n)});const o=j("T-Shirt"),l=d.projectType==="Album"?2:1,i=Math.max(50,Math.ceil(c*(d.projectType==="Album"?.8:.5))),f={XS:Math.round(i*.05),S:Math.round(i*.18),M:Math.round(i*.3),L:Math.round(i*.28),XL:Math.round(i*.14),XXL:Math.max(0,i-Math.round(i*(.05+.18+.3+.28+.14)))};if(m.push({id:C(),category:"T-Shirt",method:o.defaultMethod,quantity:i,colorways:l,sizeBreakdown:f,targetUnitCostUSD:D(o)}),d.projectType!=="Singles"||u.city&&/ny|chicago|toronto|seattle|london|berlin/i.test(u.city)){const x=j("Hoodie"),b=Math.max(24,Math.ceil(c*.2));m.push({id:C(),category:"Hoodie",method:x.defaultMethod,quantity:b,targetUnitCostUSD:D(x)})}if(d.projectType!=="Singles"){if(d.projectType==="Album"){const b=j("Vinyl");m.push({id:C(),category:"Vinyl",method:b.defaultMethod,quantity:100,targetUnitCostUSD:D(b)})}const x=j("CD");m.push({id:C(),category:"CD",method:x.defaultMethod,quantity:100,targetUnitCostUSD:D(x)})}if(d.targetMarkets.includes("Live")){const x=j("Tote"),b=Math.max(24,Math.ceil(c*.15));m.push({id:C(),category:"Tote",method:x.defaultMethod,quantity:b,targetUnitCostUSD:D(x)})}for(const x of m)x.targetUnitCostUSD&&(x.estTotalCostUSD=Math.round(x.targetUnitCostUSD*x.quantity));const y=m.reduce((x,b)=>x+(b.estTotalCostUSD||0),0);return{items:m,estBudgetUSD:y}}function re(u,d,c,m,n){const g=`${u.artistName||"Artist"} â€” Quote request for ${c.category} (${c.quantity})`,o=[];if(o.push(`Hi${m?` ${m}`:""},`),o.push(""),o.push(`Iâ€™m planning merch for an upcoming ${d.projectType.toLowerCase()} cycle and need a quote for:`),o.push(`- Item: ${c.category}`),o.push(`- Method: ${c.method}`),o.push(`- Quantity: ${c.quantity}`),c.colorways&&o.push(`- Colorways: ${c.colorways}`),c.sizeBreakdown&&o.push(`- Sizes: ${Object.entries(c.sizeBreakdown).map(([l,i])=>`${l} ${i}`).join(", ")}`),c.targetUnitCostUSD&&o.push(`- Target unit cost: ~$${c.targetUnitCostUSD.toFixed(2)}`),o.push(""),o.push("Please include: total cost, setup fees, lead time, and any minimum order requirements."),o.push("Artwork is ready in vector/print specs."),o.push(""),o.push("Thanks!"),o.push(`${u.artistName||"Artist"}`),n&&(n.email||n.instagram||n.website||n.phone)){if(o.push(""),o.push("â€”"),o.push("Contact me:"),(n.name||n.city)&&o.push(`- ${n.name||"Artist"}${n.city?` â€¢ ${n.city}`:""}`),n.email&&o.push(`- Email: ${n.email}`),n.instagram){const l=n.instagram.trim(),i=/^https?:\/\//i.test(l)?l:`https://instagram.com/${l.replace(/^@/,"")}`;o.push(`- Instagram: ${i}`)}if(n.website){const l=n.website.trim(),i=/^https?:\/\//i.test(l)?l:`https://${l}`;o.push(`- Website: ${i}`)}n.phone&&o.push(`- Phone: ${n.phone}`)}return{subject:g,message:o.join(`
`)}}const ae={XS:.05,S:.18,M:.3,L:.28,XL:.14,XXL:.05};function U(u){const d={XS:0,S:0,M:0,L:0,XL:0,XXL:0},c=Object.entries(ae);let m=0;for(let n=0;n<c.length;n++){const[g,o]=c[n];if(n<c.length-1){const l=Math.max(0,Math.floor(u*o));d[g]=l,m+=l}else d[g]=Math.max(0,u-m)}return d}function ne(u,d){const c=["XS","S","M","L","XL","XXL"],m=c.map(f=>Math.max(0,Math.floor(u[f]??0))),n=m.reduce((f,y)=>f+y,0);if(n<=0)return U(d);const g=m.map(f=>Math.floor(f/n*d));let o=g.reduce((f,y)=>f+y,0),l=0;for(;o<d;)g[l%g.length]+=1,o+=1,l+=1;const i={XS:0,S:0,M:0,L:0,XL:0,XXL:0};return c.forEach((f,y)=>{i[f]=g[y]}),i}function de({profile:u,project:d,estimatedDraw:c,onAddToBudget:m,onToast:n}){const g=`${d.projectType}-${d.units}`,o=M.useMemo(()=>W(u.artistName,g)||q(u,d,c).items,[u,d,c]),[l,i]=M.useState(o),f=K();M.useEffect(()=>{Z(l,u.artistName,g)},[l,u.artistName,g]);const y=e=>e.toLocaleString(void 0,{style:"currency",currency:"USD",maximumFractionDigits:0}),x=(e,r)=>i(t=>t.map(a=>a.id===e?k({...a,quantity:Math.max(1,r)}):a)),b=(e,r)=>i(t=>t.map(a=>a.id===e?k({...a,targetUnitCostUSD:Math.max(0,r)}):a)),T=(e,r)=>i(t=>t.map(a=>a.id===e?{...a,colorways:Math.max(1,Math.floor(r))}:a)),R=(e,r)=>i(t=>t.map(a=>a.id===e?{...a,method:r}:a)),E=(e,r)=>i(t=>t.map(a=>a.id===e?{...a,sellPriceUSD:Math.max(0,r)}:a)),A=(e,r)=>i(t=>t.map(a=>a.id===e?{...a,preferredVendorId:r||void 0}:a)),B=(e,r,t)=>i(a=>a.map(p=>p.id===e?{...p,sizeBreakdown:{...p.sizeBreakdown||U(p.quantity),[r]:Math.max(0,Math.floor(t))}}:p)),V=e=>i(r=>r.map(t=>t.id===e?{...t,sizeBreakdown:ne(t.sizeBreakdown||U(t.quantity),t.quantity)}:t)),X=e=>i(r=>r.map(t=>t.id===e?{...t,sizeBreakdown:U(t.quantity)}:t));function k(e){return e.targetUnitCostUSD?{...e,estTotalCostUSD:Math.round(e.targetUnitCostUSD*e.quantity)}:e}const H=e=>{m({description:`Merch â€” ${e.category}${e.colorways?` x${e.colorways} colorways`:""} (${e.quantity})`,totalCost:e.estTotalCostUSD||0}),n==null||n("Merch item added to budget")},z=()=>{let e=0;for(const r of l)m({description:`Merch â€” ${r.category}${r.colorways?` x${r.colorways} colorways`:""} (${r.quantity})`,totalCost:r.estTotalCostUSD||0}),e++;n==null||n(`Added ${e} merch items to budget`)},w=(e,r)=>{const{subject:t,message:a}=re(u,d,e,r,f);navigator.clipboard.writeText(`${t}

${a}`),n==null||n("Quote request copied to clipboard")},P=l.reduce((e,r)=>e+(r.estTotalCostUSD||0),0),v=l.reduce((e,r)=>e+(r.sellPriceUSD||0)*r.quantity,0),$=Math.max(0,v-P),I=v>0?Math.round($/v*100):0,[L,Q]=M.useState(50),F={"T-Shirt":["Screen Print","DTG"],Hoodie:["Screen Print","DTG"],Hat:["Embroidery"],"Sticker Pack":["Sticker Die-Cut"],Tote:["Screen Print"],Poster:["Sublimation"],Vinyl:["Vinyl Pressing"],CD:["CD Duplication"]};function O(e,r){const t=S.filter(h=>h.categories.includes(e));if(r){const h=S.find(N=>N.id===r);return{minOrder:h==null?void 0:h.minOrder,leadDays:h==null?void 0:h.avgLeadDays}}const a=Math.min(...t.map(h=>h.minOrder||0).filter(h=>h>0)),p=Math.round(t.map(h=>h.avgLeadDays||0).filter(h=>h>0).reduce((h,N)=>h+N,0)/Math.max(1,t.map(h=>h.avgLeadDays||0).filter(h=>h>0).length));return{minOrder:Number.isFinite(a)?a:void 0,leadDays:Number.isFinite(p)&&p>0?p:void 0}}function _(e){const r=S.filter(p=>p.categories.includes(e)),t=r.some(p=>p.dropship),a=r.some(p=>p.ecoOptions);return{hasDropship:t,hasEco:a}}const G=e=>{if(!e.length)return"";const r=Object.keys(e[0]),t=[r.join(",")];for(const a of e)t.push(r.map(p=>JSON.stringify(a[p]??"")).join(","));return t.join(`
`)},Y=(e,r)=>{const t=new Blob([r],{type:"text/csv"}),a=URL.createObjectURL(t),p=document.createElement("a");p.href=a,p.download=e,p.click(),URL.revokeObjectURL(a)},J=()=>{const e=l.map(r=>({category:r.category,method:r.method,quantity:r.quantity,colorways:r.colorways||"",unitCost:r.targetUnitCostUSD||"",total:r.estTotalCostUSD||""}));Y(`${(u.artistName||"artist").replaceAll(" ","-")}-merch.csv`,G(e)),n==null||n("Merch CSV exported")};return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6 rounded-2xl border border-primary-700 bg-primary-900/20 p-6 backdrop-blur",children:[s.jsx("h2",{className:"text-xl font-semibold text-primary-100 mb-2",children:"ðŸ›ï¸ Merch Planner"}),s.jsx("p",{className:"text-surface-300 text-sm",children:"Recommended merch lineup based on your project and expected draw. Adjust quantities, copy a vendor quote request, or add items to your budget."}),s.jsxs("div",{className:"mt-3 flex items-center gap-3 text-sm text-primary-200",children:[s.jsxs("span",{children:["Estimated total cost: ",y(P)]}),s.jsx("span",{className:"text-surface-400",children:"â€¢"}),s.jsxs("span",{children:["Projected revenue: ",y(v)]}),s.jsx("span",{className:"text-surface-400",children:"â€¢"}),s.jsxs("span",{children:["Gross margin: ",y($)," (",I,"%)"]}),s.jsx("span",{className:"text-surface-400",children:"â€¢"}),s.jsx("button",{className:"text-xs rounded border border-surface-600 text-surface-200 px-2 py-1 hover:bg-surface-700",onClick:()=>i(e=>e.map(r=>({...r,sellPriceUSD:ee[r.category]||r.sellPriceUSD||0}))),children:"Suggest sell prices"}),s.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[s.jsx("label",{className:"text-surface-300",children:"Target margin %"}),s.jsx("input",{type:"number",min:0,max:90,className:"w-16 rounded bg-surface-900 px-2 py-1",value:L,onChange:e=>Q(Math.max(0,Math.min(90,parseInt(e.target.value||"0"))))}),s.jsx("button",{className:"text-xs rounded border border-primary-600 text-primary-200 px-2 py-1 hover:bg-primary-700/30",onClick:()=>i(e=>e.map(r=>r.targetUnitCostUSD?{...r,sellPriceUSD:te(r.targetUnitCostUSD,L/100)}:r)),children:"Apply"})]}),s.jsx("button",{className:"text-xs rounded border border-primary-600 text-primary-200 px-2 py-1 hover:bg-primary-700/30",onClick:z,children:"Add all to budget"}),s.jsx("button",{className:"text-xs rounded border border-surface-600 text-surface-200 px-2 py-1 hover:bg-surface-700",onClick:J,children:"Export CSV"}),s.jsx("button",{className:"text-xs rounded border border-red-600 text-red-200 px-2 py-1 hover:bg-red-700/30",onClick:()=>i(q(u,d,c).items),children:"Reset to recommended"})]})]}),s.jsx("div",{className:"space-y-4",children:l.map(e=>{var r;return s.jsxs("div",{className:"rounded-2xl border border-surface-700 bg-surface-800/70 p-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-surface-100",children:e.category}),s.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 text-xs text-surface-300",children:[s.jsx("label",{className:"text-surface-400",children:"Method"}),s.jsx("select",{className:"rounded bg-surface-900 px-2 py-1",value:e.method,onChange:t=>R(e.id,t.target.value),children:(e.preferredVendorId?((r=S.find(t=>t.id===e.preferredVendorId))==null?void 0:r.methods)||[]:F[e.category]||[e.method]).map(t=>s.jsx("option",{value:t,children:t},t))}),["T-Shirt","Hoodie"].includes(e.category)&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-surface-500",children:"â€¢"}),s.jsx("label",{className:"text-surface-400",children:"Colorways"}),s.jsx("input",{type:"number",min:1,className:"w-16 rounded bg-surface-900 px-2 py-1",value:e.colorways||1,onChange:t=>T(e.id,parseInt(t.target.value||"1"))})]}),s.jsx("span",{className:"text-surface-500",children:"â€¢"}),s.jsx("label",{className:"text-surface-400",children:"Vendor"}),s.jsxs("select",{className:"rounded bg-surface-900 px-2 py-1",value:e.preferredVendorId||"",onChange:t=>A(e.id,t.target.value),children:[s.jsx("option",{value:"",children:"Any"}),S.filter(t=>t.categories.includes(e.category)).map(t=>s.jsx("option",{value:t.id,children:t.name},t.id))]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("label",{className:"text-xs text-surface-400 block",children:"Qty"}),s.jsx("input",{type:"number",className:"w-24 rounded bg-surface-900 px-2 py-1 text-sm",value:e.quantity,onChange:t=>x(e.id,parseInt(t.target.value||"1"))})]})]}),e.sizeBreakdown&&s.jsx("div",{className:"mt-2 text-xs text-surface-300",children:s.jsxs("details",{children:[s.jsxs("summary",{className:"cursor-pointer select-none text-surface-200",children:["Sizes: ",Object.entries(e.sizeBreakdown).map(([t,a])=>`${t} ${a}`).join(", ")]}),s.jsx("div",{className:"mt-2 grid grid-cols-6 gap-2",children:Object.keys(e.sizeBreakdown).map(t=>{var a;return s.jsxs("div",{className:"flex flex-col items-start text-[11px]",children:[s.jsx("label",{className:"text-surface-400 mb-1",children:String(t)}),s.jsx("input",{type:"number",min:0,className:"w-full rounded bg-surface-900 px-2 py-1",value:((a=e.sizeBreakdown)==null?void 0:a[t])??0,onChange:p=>B(e.id,t,parseInt(p.target.value||"0"))})]},String(t))})}),s.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[s.jsxs("button",{className:"text-xs rounded border border-surface-600 text-surface-300 px-2 py-1 hover:bg-surface-700",onClick:()=>V(e.id),children:["Rebalance to ",e.quantity]}),s.jsx("button",{className:"text-xs rounded border border-surface-600 text-surface-300 px-2 py-1 hover:bg-surface-700",onClick:()=>X(e.id),children:"Reset default sizes"})]})]})}),s.jsxs("div",{className:"mt-2 flex flex-wrap items-center gap-3 text-xs text-surface-300",children:[s.jsx("label",{className:"text-surface-400",children:"Unit cost (USD)"}),s.jsx("input",{type:"number",min:0,step:"0.01",className:"w-28 rounded bg-surface-900 px-2 py-1",value:e.targetUnitCostUSD??0,onChange:t=>b(e.id,parseFloat(t.target.value||"0"))}),s.jsx("span",{className:"text-surface-500",children:"â€¢"}),s.jsxs("span",{children:["Est. total: ",e.estTotalCostUSD?y(e.estTotalCostUSD):"â€”"]}),s.jsx("span",{className:"text-surface-500",children:"â€¢"}),s.jsx("label",{className:"text-surface-400",children:"Sell price"}),s.jsx("input",{type:"number",min:0,step:"0.01",className:"w-24 rounded bg-surface-900 px-2 py-1",value:e.sellPriceUSD??0,onChange:t=>E(e.id,parseFloat(t.target.value||"0"))}),s.jsx("span",{className:"text-surface-500",children:"â€¢"}),s.jsxs("span",{children:["Revenue: ",e.sellPriceUSD?y((e.sellPriceUSD||0)*e.quantity):"â€”"]}),e.sellPriceUSD&&e.estTotalCostUSD?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-surface-500",children:"â€¢"}),s.jsxs("span",{children:["Margin: ",y((e.sellPriceUSD||0)*e.quantity-(e.estTotalCostUSD||0))]})]}):null]}),(()=>{const t=O(e.category,e.preferredVendorId),a=_(e.category);return t.minOrder||t.leadDays||a.hasDropship||a.hasEco?s.jsxs("div",{className:"mt-2 text-[11px] text-surface-400",children:[t.minOrder&&s.jsxs("span",{className:"mr-3",children:["Typical MOQ: ",t.minOrder]}),t.leadDays&&s.jsxs("span",{children:["Avg lead: ~",t.leadDays," days"]}),a.hasDropship&&s.jsxs("span",{className:"ml-3 inline-flex items-center gap-1 text-surface-300",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-surface-500 rounded-full"})," Dropship options"]}),a.hasEco&&s.jsxs("span",{className:"ml-2 inline-flex items-center gap-1 text-green-300",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full"})," Eco options"]})]}):null})(),(()=>{const t=O(e.category,e.preferredVendorId);return t.minOrder&&e.quantity<t.minOrder?s.jsx("div",{className:"mt-2 inline-flex items-center text-[11px] text-red-300 bg-red-900/20 border border-red-700/40 rounded px-2 py-1",children:"Below typical MOQ for this item"}):null})(),s.jsxs("div",{className:"mt-3 flex flex-wrap gap-2",children:[s.jsx("button",{className:"text-xs rounded border border-primary-600 text-primary-200 px-2 py-1 hover:bg-primary-700/30",onClick:()=>H(e),children:"Add to budget"}),s.jsx("button",{className:"text-xs rounded border border-surface-600 text-surface-300 px-2 py-1 hover:bg-surface-700",onClick:()=>w(e),children:"Copy quote (generic)"}),S.filter(t=>t.categories.includes(e.category)).slice(0,3).map(t=>s.jsxs("button",{className:"text-xs rounded border border-surface-600 text-surface-300 px-2 py-1 hover:bg-surface-700",onClick:()=>w(e,t.name),children:["Copy quote: ",t.name]},t.id)),s.jsx("button",{className:"text-xs rounded border border-surface-700 text-surface-300 px-2 py-1 hover:bg-surface-700",onClick:()=>i(t=>t.filter(a=>a.id!==e.id)),children:"Remove"})]}),s.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:S.filter(t=>t.categories.includes(e.category)).map(t=>s.jsx("a",{href:t.url,target:"_blank",rel:"noreferrer",className:"text-xs rounded border border-surface-600 px-2 py-1 text-surface-200 hover:bg-surface-700",children:t.name},t.id))})]},e.id)})})]})}export{de as default};
