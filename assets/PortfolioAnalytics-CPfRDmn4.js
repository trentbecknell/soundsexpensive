import{j as e}from"./flags-BL-W5WOk.js";import{r as u}from"./vendor-react-BVOO17zE.js";import{R as f,B as y,C as N,X as k,Y as w,T as g,a as A,h as R,i as D,j as M}from"./vendor-charts-BfDgEjn4.js";function q({portfolio:o,onClose:C}){const b=u.useMemo(()=>{const s=[{range:"0-20",min:0,max:20,count:0,color:"#ef4444"},{range:"21-40",min:21,max:40,count:0,color:"#f97316"},{range:"41-60",min:41,max:60,count:0,color:"#eab308"},{range:"61-80",min:61,max:80,count:0,color:"#22c55e"},{range:"81-100",min:81,max:100,count:0,color:"#10b981"}];return o.artists.forEach(a=>{var c,d;const l=(d=(c=a.state)==null?void 0:c.catalogAnalysisData)==null?void 0:d.average_score;if(l){const i=s.find(r=>l>=r.min&&l<=r.max);i&&i.count++}}),s},[o.artists]),h=u.useMemo(()=>{const s=new Map;return o.artists.forEach(a=>{var c,d;(a.profile.genres||((d=(c=a.state)==null?void 0:c.profile)==null?void 0:d.genres)||"").split(",").forEach(i=>{const r=i.trim();r&&s.set(r,(s.get(r)||0)+1)})}),Array.from(s.entries()).map(([a,l])=>({name:a,value:l})).sort((a,l)=>l.value-a.value).slice(0,8)},[o.artists]),z=u.useMemo(()=>{const s=["Hobbyist","Emerging","Developing","Established","Professional"],a=new Map(s.map(l=>[l,0]));return o.artists.forEach(l=>{var d,i;const c=((i=(d=l.state)==null?void 0:d.profile)==null?void 0:i.stage)||"Unknown";s.includes(c)?a.set(c,(a.get(c)||0)+1):a.set("Hobbyist",(a.get("Hobbyist")||0)+1)}),s.map(l=>({stage:l,count:a.get(l)||0}))},[o.artists]),j=u.useMemo(()=>o.artists.filter(s=>{var a,l;return(l=(a=s.state)==null?void 0:a.catalogAnalysisData)==null?void 0:l.average_score}).map(s=>{var a,l,c,d,i,r,n,x,m,p;return{id:s.id,name:s.profile.artistName||"Unnamed Artist",quality:((l=(a=s.state)==null?void 0:a.catalogAnalysisData)==null?void 0:l.average_score)||0,tracks:((d=(c=s.state)==null?void 0:c.catalogAnalysisData)==null?void 0:d.total_tracks)||0,consistency:((n=(r=(i=s.state)==null?void 0:i.catalogAnalysisData)==null?void 0:r.sonic_identity)==null?void 0:n.consistency_score)||0,stage:((m=(x=s.state)==null?void 0:x.profile)==null?void 0:m.stage)||"Unknown",hasRoadmap:((p=s.state)==null?void 0:p.roadmapGenerated)||!1}}).sort((s,a)=>a.quality-s.quality).slice(0,10),[o.artists]),t=u.useMemo(()=>{const s=o.artists.filter(i=>{var r;return(r=i.state)==null?void 0:r.catalogAnalysisComplete}),a=s.reduce((i,r)=>{var n,x;return i+(((x=(n=r.state)==null?void 0:n.catalogAnalysisData)==null?void 0:x.average_score)||0)},0),l=s.reduce((i,r)=>{var n,x;return i+(((x=(n=r.state)==null?void 0:n.catalogAnalysisData)==null?void 0:x.total_tracks)||0)},0),c=s.reduce((i,r)=>{var n,x,m;return i+(((m=(x=(n=r.state)==null?void 0:n.catalogAnalysisData)==null?void 0:x.sonic_identity)==null?void 0:m.consistency_score)||0)},0),d=o.artists.filter(i=>{var r;return(r=i.state)==null?void 0:r.roadmapGenerated}).length;return{totalArtists:o.artists.length,analyzed:s.length,avgQuality:s.length>0?(a/s.length).toFixed(1):"0",totalTracks:l,avgConsistency:s.length>0?(c/s.length).toFixed(1):"0",roadmaps:d,readyForRelease:s.filter(i=>{var r,n;return(((n=(r=i.state)==null?void 0:r.catalogAnalysisData)==null?void 0:n.average_score)||0)>=70}).length}},[o.artists]),v=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"];return e.jsxs("div",{className:"min-h-screen bg-surface-900 pb-12",children:[e.jsx("div",{"aria-hidden":!0,className:"fixed inset-0 -z-10 bg-studio"}),e.jsx("div",{className:"sticky top-0 z-40 bg-surface-900/95 backdrop-blur border-b border-surface-700",children:e.jsx("div",{className:"max-w-7xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-surface-50",children:"Portfolio Analytics"}),e.jsx("p",{className:"text-sm text-surface-300",children:"Aggregate insights across your roster"})]}),e.jsx("button",{onClick:C,className:"p-2 rounded-lg hover:bg-surface-800 text-surface-400 hover:text-surface-200 transition-colors",title:"Close analytics view",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[e.jsxs("div",{className:"bg-surface-800/50 rounded-xl p-4 border border-surface-700",children:[e.jsx("div",{className:"text-3xl font-bold text-surface-50",children:t.totalArtists}),e.jsx("div",{className:"text-xs text-surface-400 mt-1",children:"Total Artists"})]}),e.jsxs("div",{className:"bg-surface-800/50 rounded-xl p-4 border border-surface-700",children:[e.jsx("div",{className:"text-3xl font-bold text-primary-400",children:t.analyzed}),e.jsx("div",{className:"text-xs text-surface-400 mt-1",children:"Analyzed"})]}),e.jsxs("div",{className:"bg-surface-800/50 rounded-xl p-4 border border-surface-700",children:[e.jsx("div",{className:"text-3xl font-bold text-green-400",children:t.avgQuality}),e.jsx("div",{className:"text-xs text-surface-400 mt-1",children:"Avg Quality"})]}),e.jsxs("div",{className:"bg-surface-800/50 rounded-xl p-4 border border-surface-700",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-400",children:t.totalTracks}),e.jsx("div",{className:"text-xs text-surface-400 mt-1",children:"Total Tracks"})]}),e.jsxs("div",{className:"bg-surface-800/50 rounded-xl p-4 border border-surface-700",children:[e.jsxs("div",{className:"text-3xl font-bold text-purple-400",children:[t.avgConsistency,"%"]}),e.jsx("div",{className:"text-xs text-surface-400 mt-1",children:"Avg Identity"})]}),e.jsxs("div",{className:"bg-surface-800/50 rounded-xl p-4 border border-surface-700",children:[e.jsx("div",{className:"text-3xl font-bold text-accent-400",children:t.roadmaps}),e.jsx("div",{className:"text-xs text-surface-400 mt-1",children:"Roadmaps"})]}),e.jsxs("div",{className:"bg-surface-800/50 rounded-xl p-4 border border-surface-700",children:[e.jsx("div",{className:"text-3xl font-bold text-green-400",children:t.readyForRelease}),e.jsx("div",{className:"text-xs text-surface-400 mt-1",children:"Release Ready"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"rounded-2xl border border-surface-700 bg-surface-800/50 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-50 mb-4",children:"Quality Distribution"}),e.jsx("div",{className:"h-80 w-full",children:e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(y,{data:b,children:[e.jsx(N,{strokeDasharray:"3 3",stroke:"#475569"}),e.jsx(k,{dataKey:"range",tick:{fill:"#cbd5e1",fontSize:12}}),e.jsx(w,{tick:{fill:"#94a3b8",fontSize:12},label:{value:"Artists",angle:-90,position:"insideLeft",fill:"#94a3b8"}}),e.jsx(g,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"8px"},labelStyle:{color:"#f1f5f9"}}),e.jsx(A,{dataKey:"count",fill:"#3b82f6",children:b.map((s,a)=>e.jsx(R,{fill:s.color},`cell-${a}`))})]})})}),e.jsx("p",{className:"text-xs text-surface-400 mt-2 text-center",children:"Catalog quality scores (only analyzed artists)"})]}),e.jsxs("div",{className:"rounded-2xl border border-surface-700 bg-surface-800/50 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-50 mb-4",children:"Genre Breakdown"}),h.length>0?e.jsx("div",{className:"h-80 w-full",children:e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(D,{children:[e.jsx(M,{data:h,cx:"50%",cy:"50%",labelLine:!1,label:({name:s,percent:a})=>`${s} (${(a*100).toFixed(0)}%)`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:h.map((s,a)=>e.jsx(R,{fill:v[a%v.length]},`cell-${a}`))}),e.jsx(g,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"8px"}})]})})}):e.jsx("div",{className:"h-80 flex items-center justify-center text-surface-400",children:"No genre data available"}),e.jsx("p",{className:"text-xs text-surface-400 mt-2 text-center",children:"Distribution of genres across portfolio"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"rounded-2xl border border-surface-700 bg-surface-800/50 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-50 mb-4",children:"Career Stage Distribution"}),e.jsx("div",{className:"h-80 w-full",children:e.jsx(f,{width:"100%",height:"100%",children:e.jsxs(y,{data:z,layout:"vertical",children:[e.jsx(N,{strokeDasharray:"3 3",stroke:"#475569"}),e.jsx(k,{type:"number",tick:{fill:"#94a3b8",fontSize:12}}),e.jsx(w,{type:"category",dataKey:"stage",tick:{fill:"#cbd5e1",fontSize:12},width:100}),e.jsx(g,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid #475569",borderRadius:"8px"},labelStyle:{color:"#f1f5f9"}}),e.jsx(A,{dataKey:"count",fill:"#8b5cf6"})]})})}),e.jsx("p",{className:"text-xs text-surface-400 mt-2 text-center",children:"Artists by career maturity level"})]}),e.jsxs("div",{className:"rounded-2xl border border-surface-700 bg-surface-800/50 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-surface-50 mb-4",children:"Top Performers"}),j.length>0?e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:j.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-surface-700/50 hover:bg-surface-700 transition-colors",children:[e.jsxs("div",{className:`flex-shrink-0 w-8 h-8 rounded-full flex items-center justify-center font-bold text-sm ${a===0?"bg-yellow-600/20 text-yellow-400":a===1?"bg-gray-600/20 text-gray-400":a===2?"bg-orange-600/20 text-orange-400":"bg-surface-600 text-surface-400"}`,children:["#",a+1]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-medium text-surface-100 truncate",children:s.name}),e.jsxs("div",{className:"text-xs text-surface-400",children:[s.tracks," tracks â€¢ ",s.stage]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-primary-400",children:s.quality}),e.jsx("div",{className:"text-xs text-surface-400",children:"Quality"})]}),s.hasRoadmap&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx("span",{className:"inline-flex items-center gap-1 text-xs text-accent-400",children:e.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})})]},s.id))}):e.jsx("div",{className:"h-80 flex items-center justify-center text-surface-400",children:"No analyzed artists yet"}),e.jsx("p",{className:"text-xs text-surface-400 mt-4 text-center",children:"Ranked by catalog quality score"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"rounded-xl border border-green-700/30 bg-green-900/10 p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-green-600/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-100 mb-1",children:"Release Ready"}),e.jsxs("p",{className:"text-sm text-green-300/80",children:[t.readyForRelease," ",t.readyForRelease===1?"artist has":"artists have"," catalog quality â‰¥70 and ",t.readyForRelease===1?"is":"are"," ready for strategic releases"]})]})]})}),e.jsx("div",{className:"rounded-xl border border-blue-700/30 bg-blue-900/10 p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-blue-600/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-blue-100 mb-1",children:"Portfolio Health"}),e.jsxs("p",{className:"text-sm text-blue-300/80",children:[(t.analyzed/t.totalArtists*100).toFixed(0),"% analyzed â€¢ Avg quality ",t.avgQuality,"/100 â€¢ ",t.totalTracks," total tracks"]})]})]})}),e.jsx("div",{className:"rounded-xl border border-purple-700/30 bg-purple-900/10 p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-purple-600/20 flex items-center justify-center",children:e.jsx("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-purple-100 mb-1",children:"Planning Status"}),e.jsxs("p",{className:"text-sm text-purple-300/80",children:[t.roadmaps,"/",t.totalArtists," artists have complete roadmaps (",(t.roadmaps/t.totalArtists*100).toFixed(0),"%)"]})]})]})})]}),t.analyzed<t.totalArtists&&e.jsx("div",{className:"rounded-2xl border border-accent-700 bg-accent-900/20 p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-accent-600/20 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"ðŸ’¡"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-accent-100 mb-2",children:"Recommendation"}),e.jsxs("p",{className:"text-surface-300 text-sm",children:["You have ",t.totalArtists-t.analyzed," unanalyzed ",t.totalArtists-t.analyzed===1?"artist":"artists",". Complete catalog analysis for all artists to unlock full portfolio insights and make data-driven investment decisions."]})]})]})})]})]})}export{q as default};
