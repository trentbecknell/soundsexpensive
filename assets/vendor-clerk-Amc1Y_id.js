var B=Object.defineProperty;var N=(e,r,t)=>r in e?B(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t;var f=(e,r,t)=>N(e,typeof r!="symbol"?r+"":r,t);var g,W=(g=class extends Error{constructor(t){super(new.target.formatMessage(new.target.kind,t.message,t.code,t.docsUrl),{cause:t.cause});f(this,"clerkError",!0);f(this,"code");f(this,"longMessage");f(this,"docsUrl");f(this,"cause");Object.setPrototypeOf(this,g.prototype),this.code=t.code,this.docsUrl=t.docsUrl,this.longMessage=t.longMessage,this.cause=t.cause}get name(){return this.constructor.name}toString(){return`[${this.name}]
Message:${this.message}`}static formatMessage(t,o,n,s){const i="Clerk:",a=new RegExp(i.replace(" ","\\s*"),"i");return o=o.replace(a,""),o=`${i} ${o.trim()}

(code="${n}")

`,s&&(o+=`

Docs: ${s}`),o}},f(g,"kind","ClerkError"),g),Y=Object.freeze({InvalidProxyUrlErrorMessage:"The proxyUrl passed to Clerk is invalid. The expected value for proxyUrl is an absolute URL or a relative path with a leading '/'. (key={{url}})",InvalidPublishableKeyErrorMessage:"The publishableKey passed to Clerk is invalid. You can get your Publishable key at https://dashboard.clerk.com/last-active?path=api-keys. (key={{key}})",MissingPublishableKeyErrorMessage:"Missing publishableKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingSecretKeyErrorMessage:"Missing secretKey. You can get your key at https://dashboard.clerk.com/last-active?path=api-keys.",MissingClerkProvider:"{{source}} can only be used within the <ClerkProvider /> component. Learn more: https://clerk.com/docs/components/clerk-provider"});function J({packageName:e,customMessages:r}){let t=e;function o(s,i){if(!i)return`${t}: ${s}`;let a=s;const u=s.matchAll(/{{([a-zA-Z0-9-_]+)}}/g);for(const c of u){const l=(i[c[1]]||"").toString();a=a.replace(`{{${c[1]}}}`,l)}return`${t}: ${a}`}const n={...Y,...r};return{setPackageName({packageName:s}){return typeof s=="string"&&(t=s),this},setMessages({customMessages:s}){return Object.assign(n,s||{}),this},throwInvalidPublishableKeyError(s){throw new Error(o(n.InvalidPublishableKeyErrorMessage,s))},throwInvalidProxyUrl(s){throw new Error(o(n.InvalidProxyUrlErrorMessage,s))},throwMissingPublishableKeyError(){throw new Error(o(n.MissingPublishableKeyErrorMessage))},throwMissingSecretKeyError(){throw new Error(o(n.MissingSecretKeyErrorMessage))},throwMissingClerkProviderError(s){throw new Error(o(n.MissingClerkProvider,s))},throw(s){throw new Error(o(s))}}}var v,x=(v=class extends W{constructor(t,o){super({...o,message:t});f(this,"clerkRuntimeError",!0);Object.setPrototypeOf(this,v.prototype)}},f(v,"kind","ClerkRuntimeError"),v),I=Object.defineProperty,H=Object.getOwnPropertyDescriptor,G=Object.getOwnPropertyNames,X=Object.prototype.hasOwnProperty,Fe=(e,r)=>{for(var t in r)I(e,t,{get:r[t],enumerable:!0})},q=(e,r,t,o)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of G(r))!X.call(e,n)&&n!==t&&I(e,n,{get:()=>r[n],enumerable:!(o=H(r,n))||o.enumerable});return e},ze=(e,r,t)=>(q(e,r,"default"),t),Z={strict_mfa:{afterMinutes:10,level:"multi_factor"},strict:{afterMinutes:10,level:"second_factor"},moderate:{afterMinutes:60,level:"second_factor"},lax:{afterMinutes:1440,level:"second_factor"}},Q=new Set(["first_factor","second_factor","multi_factor"]),ee=new Set(["strict_mfa","strict","moderate","lax"]),re=e=>typeof e=="number"&&e>0,te=e=>Q.has(e),ne=e=>ee.has(e),y=e=>e.replace(/^(org:)*/,"org:"),oe=(e,r)=>{const{orgId:t,orgRole:o,orgPermissions:n}=r;return!e.role&&!e.permission||!t||!o||!n?null:e.permission?n.includes(y(e.permission)):e.role?y(o)===y(e.role):null},_=(e,r)=>{const{org:t,user:o}=ie(e),[n,s]=r.split(":"),i=s||n;return n==="org"?t.includes(i):n==="user"?o.includes(i):[...t,...o].includes(i)},se=(e,r)=>{const{features:t,plans:o}=r;return e.feature&&t?_(t,e.feature):e.plan&&o?_(o,e.plan):null},ie=e=>{const r=e?e.split(",").map(t=>t.trim()):[];return{org:r.filter(t=>t.split(":")[0].includes("o")).map(t=>t.split(":")[1]),user:r.filter(t=>t.split(":")[0].includes("u")).map(t=>t.split(":")[1])}},ae=e=>{if(!e)return!1;const r=n=>typeof n=="string"?Z[n]:n,t=typeof e=="string"&&ne(e),o=typeof e=="object"&&te(e.level)&&re(e.afterMinutes);return t||o?r.bind(null,e):!1},le=(e,{factorVerificationAge:r})=>{if(!e.reverification||!r)return null;const t=ae(e.reverification);if(!t)return null;const{level:o,afterMinutes:n}=t(),[s,i]=r,a=s!==-1?n>s:null,u=i!==-1?n>i:null;switch(o){case"first_factor":return a;case"second_factor":return i!==-1?u:a;case"multi_factor":return i===-1?a:a&&u}},Be=e=>r=>{if(!e.userId)return!1;const t=se(r,e),o=oe(r,e),n=le(r,e);return[t||o,n].some(s=>s===null)?[t||o,n].some(s=>s===!0):[t||o,n].every(s=>s===!0)},Ne=({authObject:{sessionId:e,sessionStatus:r,userId:t,actor:o,orgId:n,orgRole:s,orgSlug:i,signOut:a,getToken:u,has:c,sessionClaims:l},options:{treatPendingAsSignedOut:d=!0}})=>{if(e===void 0&&t===void 0)return{isLoaded:!1,isSignedIn:void 0,sessionId:e,sessionClaims:void 0,userId:t,actor:void 0,orgId:void 0,orgRole:void 0,orgSlug:void 0,has:void 0,signOut:a,getToken:u};if(e===null&&t===null)return{isLoaded:!0,isSignedIn:!1,sessionId:e,userId:t,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:a,getToken:u};if(d&&r==="pending")return{isLoaded:!0,isSignedIn:!1,sessionId:null,userId:null,sessionClaims:null,actor:null,orgId:null,orgRole:null,orgSlug:null,has:()=>!1,signOut:a,getToken:u};if(e&&l&&t&&n&&s)return{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:l,userId:t,actor:o||null,orgId:n,orgRole:s,orgSlug:i||null,has:c,signOut:a,getToken:u};if(e&&l&&t&&!n)return{isLoaded:!0,isSignedIn:!0,sessionId:e,sessionClaims:l,userId:t,actor:o||null,orgId:null,orgRole:null,orgSlug:null,has:c,signOut:a,getToken:u}},L=e=>typeof atob<"u"&&typeof atob=="function"?atob(e):typeof global<"u"&&global.Buffer?new global.Buffer(e,"base64").toString():e,ce=[".lcl.dev",".stg.dev",".lclstage.dev",".stgstage.dev",".dev.lclclerk.com",".stg.lclclerk.com",".accounts.lclclerk.com","accountsstage.dev","accounts.dev"],T="pk_live_",ue="pk_test_";function D(e){if(!e.endsWith("$"))return!1;const r=e.slice(0,-1);return r.includes("$")?!1:r.includes(".")}function P(e,r={}){if(e=e||"",!e||!M(e)){if(r.fatal&&!e)throw new Error("Publishable key is missing. Ensure that your publishable key is correctly configured. Double-check your environment configuration for your keys, or access them here: https://dashboard.clerk.com/last-active?path=api-keys");if(r.fatal&&!M(e))throw new Error("Publishable key not valid.");return null}const t=e.startsWith(T)?"production":"development";let o;try{o=L(e.split("_")[2])}catch{if(r.fatal)throw new Error("Publishable key not valid: Failed to decode key.");return null}if(!D(o)){if(r.fatal)throw new Error("Publishable key not valid: Decoded key has invalid format.");return null}let n=o.slice(0,-1);return r.proxyUrl?n=r.proxyUrl:t!=="development"&&r.domain&&r.isSatellite&&(n=`clerk.${r.domain}`),{instanceType:t,frontendApi:n}}function M(e=""){try{if(!(e.startsWith(T)||e.startsWith(ue)))return!1;const t=e.split("_");if(t.length!==3)return!1;const o=t[2];if(!o)return!1;const n=L(o);return D(n)}catch{return!1}}function de(){const e=new Map;return{isDevOrStagingUrl:r=>{if(!r)return!1;const t=typeof r=="string"?r:r.hostname;let o=e.get(t);return o===void 0&&(o=ce.some(n=>t.endsWith(n)),e.set(t,o)),o}}}var fe="METHOD_CALLED",he=.1;function We(e,r){return{event:fe,eventSamplingRate:he,payload:{method:e,...r}}}var ge=()=>{try{return!1}catch{}return!1},ve=()=>{try{return!1}catch{}return!1},pe=()=>{try{return!0}catch{}return!1},S=new Set,Ye=(e,r,t)=>{const o=ve()||pe(),n=e;S.has(n)||o||(S.add(n),console.warn(`Clerk - DEPRECATION WARNING: "${e}" is deprecated and will be removed in the next major release.
${r}`))},Je=e=>{ge()&&console.error(`Clerk: ${e}`)};function He(e,r,t){if(typeof e=="function")return e(r);if(typeof e<"u")return e;if(typeof t<"u")return t}var Ge=(e,...r)=>{const t={...e};for(const o of r)delete t[o];return t},ye=(e,r="5.103.0")=>{if(e)return e;const t=me(r);return t?t==="snapshot"?"5.103.0":t:be(r)},me=e=>{var r;return(r=e.trim().replace(/^v/,"").match(/-(.+?)(\.|$)/))==null?void 0:r[1]},be=e=>e.trim().replace(/^v/,"").split(".")[0];function Ee(e){return e?we(e)||U(e):!0}function we(e){return/^http(s)?:\/\//.test(e||"")}function U(e){return e.startsWith("/")}function ke(e){return e?U(e)?new URL(e,window.location.origin).toString():e:""}function _e(e){if(!e)return"";let r;if(e.match(/^(clerk\.)+\w*$/))r=/(clerk\.)*(?=clerk\.)/;else{if(e.match(/\.clerk.accounts/))return e;r=/^(clerk\.)*/gi}return`clerk.${e.replace(r,"")}`}var Pe={initialDelay:125,maxDelayBetweenRetries:0,factor:2,shouldRetry:(e,r)=>r<5,retryImmediately:!1,jitter:!0},Me=100,$=async e=>new Promise(r=>setTimeout(r,e)),j=(e,r)=>r?e*(1+Math.random()):e,Se=e=>{let r=0;const t=()=>{const o=e.initialDelay,n=e.factor;let s=o*Math.pow(n,r);return s=j(s,e.jitter),Math.min(e.maxDelayBetweenRetries||s,s)};return async()=>{await $(t()),r++}},Re=async(e,r={})=>{let t=0;const{shouldRetry:o,initialDelay:n,maxDelayBetweenRetries:s,factor:i,retryImmediately:a,jitter:u,onBeforeRetry:c}={...Pe,...r},l=Se({initialDelay:n,maxDelayBetweenRetries:s,factor:i,jitter:u});for(;;)try{return await e()}catch(d){if(t++,!o(d,t))throw d;c&&await c(t),a&&t===1?await $(j(Me,u)):await l()}},Oe="loadScript cannot be called when document does not exist",Ce="loadScript cannot be called without a src";async function Ae(e="",r){const{async:t,defer:o,beforeLoad:n,crossOrigin:s,nonce:i}=r||{};return Re(()=>new Promise((u,c)=>{e||c(new Error(Ce)),(!document||!document.body)&&c(new Error(Oe));const l=document.createElement("script");s&&l.setAttribute("crossorigin",s),l.async=t||!1,l.defer=o||!1,l.addEventListener("load",()=>{l.remove(),u(l)}),l.addEventListener("error",d=>{l.remove(),c(d.error??new Error(`failed to load script: ${e}`))}),l.src=e,l.nonce=i,n==null||n(l),document.body.appendChild(l)}),{shouldRetry:(u,c)=>c<=5})}var xe="failed_to_load_clerk_js",Ie="failed_to_load_clerk_js_timeout",V="Failed to load Clerk",{isDevOrStagingUrl:Le}=de(),K=J({packageName:"@clerk/shared"});function Xe(e){K.setPackageName({packageName:e})}function m(){if(typeof window>"u"||!window.Clerk)return!1;const e=window.Clerk;return typeof e=="object"&&typeof e.load=="function"}function R(e){return new Promise((r,t)=>{let o=!1;const n=(c,l)=>{clearTimeout(c),clearInterval(l)},s=()=>{o||m()&&(o=!0,n(a,u),r(null))},a=setTimeout(()=>{o||(o=!0,n(a,u),m()?r(null):t(new x(V,{code:Ie})))},e);s();const u=setInterval(()=>{if(o){clearInterval(u);return}s()},100)})}var qe=async e=>{const r=(e==null?void 0:e.scriptLoadTimeout)??15e3;if(m())return null;if(document.querySelector("script[data-clerk-js-script]"))return R(r);if(!(e!=null&&e.publishableKey))return K.throwMissingPublishableKeyError(),null;const o=R(r);return Ae(Te(e),{async:!0,crossOrigin:"anonymous",nonce:e.nonce,beforeLoad:Ue(e)}).catch(n=>{throw new x(V+(n.message?`, ${n.message}`:""),{code:xe,cause:n})}),o},Te=e=>{var l,d;const{clerkJSUrl:r,clerkJSVariant:t,clerkJSVersion:o,proxyUrl:n,domain:s,publishableKey:i}=e;if(r)return r;let a="";n&&Ee(n)?a=ke(n).replace(/http(s)?:\/\//,""):s&&!Le(((l=P(i))==null?void 0:l.frontendApi)||"")?a=_e(s):a=((d=P(i))==null?void 0:d.frontendApi)||"";const u=t?`${t.replace(/\.+$/,"")}.`:"",c=ye(o);return`https://${a}/npm/@clerk/clerk-js@${c}/dist/clerk.${u}browser.js`},De=e=>{const r={};return e.publishableKey&&(r["data-clerk-publishable-key"]=e.publishableKey),e.proxyUrl&&(r["data-clerk-proxy-url"]=e.proxyUrl),e.domain&&(r["data-clerk-domain"]=e.domain),e.nonce&&(r.nonce=e.nonce),r},Ue=e=>r=>{const t=De(e);for(const o in t)r.setAttribute(o,t[o])},Ze=(e,r,t)=>!e&&t?$e(t):je(r),$e=e=>{const r=e.userId,t=e.user,o=e.sessionId,n=e.sessionStatus,s=e.sessionClaims,i=e.session,a=e.organization,u=e.orgId,c=e.orgRole,l=e.orgPermissions,d=e.orgSlug,h=e.actor,p=e.factorVerificationAge;return{userId:r,user:t,sessionId:o,session:i,sessionStatus:n,sessionClaims:s,organization:a,orgId:u,orgRole:c,orgPermissions:l,orgSlug:d,actor:h,factorVerificationAge:p}},je=e=>{var b,E,w,k;const r=e.user?e.user.id:e.user,t=e.user,o=e.session?e.session.id:e.session,n=e.session,s=(b=e.session)==null?void 0:b.status,i=e.session?(w=(E=e.session.lastActiveToken)==null?void 0:E.jwt)==null?void 0:w.claims:null,a=e.session?e.session.factorVerificationAge:null,u=n==null?void 0:n.actor,c=e.organization,l=e.organization?e.organization.id:e.organization,d=c==null?void 0:c.slug,h=c&&((k=t==null?void 0:t.organizationMemberships)==null?void 0:k.find(z=>z.organization.id===l)),p=h&&h.permissions,F=h&&h.role;return{userId:r,user:t,sessionId:o,session:n,sessionStatus:s,sessionClaims:i,organization:c,orgId:l,orgRole:F,orgSlug:d,orgPermissions:p,actor:u,factorVerificationAge:a}};function Qe(){return typeof window<"u"}var O=(e,r,t,o,n)=>{const{notify:s}=n||{};let i=e.get(t);i||(i=[],e.set(t,i)),i.push(o),s&&r.has(t)&&o(r.get(t))},C=(e,r,t)=>(e.get(r)||[]).map(o=>o(t)),A=(e,r,t)=>{const o=e.get(r);o&&(t?o.splice(o.indexOf(t)>>>0,1):e.set(r,[]))},Ve=()=>{const e=new Map,r=new Map,t=new Map;return{on:(...n)=>O(e,r,...n),prioritizedOn:(...n)=>O(t,r,...n),emit:(n,s)=>{r.set(n,s),C(t,n,s),C(e,n,s)},off:(...n)=>A(e,...n),prioritizedOff:(...n)=>A(t,...n),internal:{retrieveListeners:n=>e.get(n)||[]}}},er={Status:"status"},rr=()=>Ve();export{Fe as _,ze as a,J as b,Be as c,Ye as d,We as e,rr as f,er as g,He as h,Qe as i,qe as j,M as k,Je as l,Ze as m,Ne as r,Xe as s,Ge as w};
