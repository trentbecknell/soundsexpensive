const f={"Atlanta, GA":{name:"Atlanta",state_province:"Georgia",population_millions:6.1,music_scene_strength:.95,music_industry_presence:"major",genre_preferences:{pop:.75,rnb:.95,hip_hop:.98,electronic:.65,alternative:.55,latin:.7,country:.6,rock:.5},sonic_profile:{preferred_tempo_range:[70,140],preferred_energy:[.6,.95],bass_culture:"heavy",production_preference:"polished"},key_venues:["The Tabernacle","Center Stage","Terminal West","Mercedes-Benz Stadium"],influential_radio_stations:["Hot 107.9","V-103","Streetz 94.5"],local_tastemakers:["DJ Drama","DJ Holiday","DJ Scream"],music_festivals:["ONE Musicfest","Shaky Knees","Music Midtown"],scene_description:"Hip-hop and R&B capital. Home to trap music. Massive influence on modern hip-hop sound.",target_demographics:["18-34 hip-hop heads","Urban music fans","Club scene"],best_strategies:["Connect with Quality Control, 1017, or other ATL labels","Get spins on Hot 107.9 or Streetz 94.5","Perform at underground venues in Little Five Points","Collaborate with Atlanta producers or artists"]},"Los Angeles, CA":{name:"Los Angeles",state_province:"California",population_millions:13.2,music_scene_strength:.98,music_industry_presence:"major",genre_preferences:{pop:.95,rnb:.85,hip_hop:.9,electronic:.85,alternative:.85,latin:.95,country:.4,rock:.75},sonic_profile:{preferred_tempo_range:[80,135],preferred_energy:[.5,.9],bass_culture:"moderate",production_preference:"polished"},key_venues:["The Troubadour","El Rey Theatre","The Roxy","The Greek Theatre","Crypto.com Arena"],influential_radio_stations:["Power 106","KROQ","KCRW","Real 92.3"],local_tastemakers:["DJ Mustard","YG","Kendrick Lamar camp"],music_festivals:["Rolling Loud LA","Camp Flog Gnaw","FYF Fest"],scene_description:"Entertainment capital. Diverse scene from West Coast hip-hop to indie. Major industry hub.",target_demographics:["Entertainment industry","Beach/surf culture","Latin community","Indie scene"],best_strategies:["Showcase at industry venues like The Troubadour","Connect with A&Rs and managers in WeHo/Beverly Hills","Get featured on KCRW or KROQ for indie/alternative","Target Latin market (huge demographic)"]},"New York City, NY":{name:"New York City",state_province:"New York",population_millions:19.8,music_scene_strength:.98,music_industry_presence:"major",genre_preferences:{pop:.9,rnb:.9,hip_hop:.95,electronic:.9,alternative:.9,latin:.95,country:.3,rock:.85},sonic_profile:{preferred_tempo_range:[85,140],preferred_energy:[.6,.95],bass_culture:"heavy",production_preference:"experimental"},key_venues:["Bowery Ballroom","Brooklyn Steel","Webster Hall","SOB's","Madison Square Garden"],influential_radio_stations:["Hot 97","Power 105.1","Z100","The Beat"],local_tastemakers:["Funkmaster Flex","Ebro","Angie Martinez"],music_festivals:["Governors Ball","Panorama","Rolling Loud NYC"],scene_description:"Birthplace of hip-hop. Diverse boroughs with distinct scenes. Highly competitive but influential.",target_demographics:["Hip-hop purists","Brooklyn indie scene","Bronx/Harlem culture","Manhattan nightlife"],best_strategies:["Build buzz in specific boroughs (Brooklyn indie, Bronx hip-hop)","Get Hot 97 or Power 105 support","Perform at Brooklyn venues for indie cred","Connect with A&Rs at major labels (most are NYC-based)"]},"Miami, FL":{name:"Miami",state_province:"Florida",population_millions:6.2,music_scene_strength:.85,music_industry_presence:"strong",genre_preferences:{pop:.85,rnb:.8,hip_hop:.9,electronic:.95,alternative:.6,latin:.98,country:.3,rock:.55},sonic_profile:{preferred_tempo_range:[95,145],preferred_energy:[.7,.98],bass_culture:"heavy",production_preference:"polished"},key_venues:["LIV","E11EVEN","Story","Ball & Chain","The Fillmore Miami Beach"],influential_radio_stations:["99 Jamz","Power 96","Mega 94.9"],local_tastemakers:["DJ Khaled","Pitbull camp","Rick Ross"],music_festivals:["Ultra Music Festival","Rolling Loud Miami","III Points"],scene_description:"Latin music hub and electronic music capital (Ultra). Club culture dominates. Caribbean influence.",target_demographics:["Latin community","EDM fans","Nightclub scene","Caribbean diaspora"],best_strategies:["Target Latin market - Spanish language/features highly effective","Focus on club-ready production","Connect with reggaeton and Latin trap producers","Ultra Music Festival showcase opportunities"]},"Nashville, TN":{name:"Nashville",state_province:"Tennessee",population_millions:1.9,music_scene_strength:.92,music_industry_presence:"major",genre_preferences:{pop:.8,rnb:.7,hip_hop:.7,electronic:.6,alternative:.75,latin:.5,country:.98,rock:.8},sonic_profile:{preferred_tempo_range:[80,120],preferred_energy:[.5,.8],bass_culture:"moderate",production_preference:"balanced"},key_venues:["The Bluebird Cafe","Ryman Auditorium","Exit/In","The Basement","Grand Ole Opry"],influential_radio_stations:["WSM","Nash FM","Lightning 100"],local_tastemakers:["Country music publishers","Songwriter community"],music_festivals:["CMA Fest","Bonnaroo","Americanafest"],scene_description:"Country music capital and major songwriting hub. Growing pop and rock scenes.",target_demographics:["Country fans","Songwriters","Americana enthusiasts","Live music tourists"],best_strategies:["Showcase songwriting at The Bluebird Cafe","Connect with Nashville publishers and co-writers","Consider country crossover if pop/rock artist","Play on Broadway for tourist exposure"]},"Chicago, IL":{name:"Chicago",state_province:"Illinois",population_millions:9.5,music_scene_strength:.88,music_industry_presence:"strong",genre_preferences:{pop:.8,rnb:.85,hip_hop:.92,electronic:.85,alternative:.8,latin:.75,country:.4,rock:.75},sonic_profile:{preferred_tempo_range:[75,135],preferred_energy:[.6,.9],bass_culture:"heavy",production_preference:"raw"},key_venues:["Metro","Empty Bottle","House of Blues Chicago","United Center"],influential_radio_stations:["Power 92","WGCI","Q87.7"],local_tastemakers:["Chance The Rapper camp","Vic Mensa","G Herbo"],music_festivals:["Lollapalooza","Pitchfork Music Festival","North Coast"],scene_description:"Drill music birthplace. Strong house music history. Gritty, authentic hip-hop scene.",target_demographics:["Drill/hip-hop fans","House music heads","South Side culture","College students"],best_strategies:["Connect with drill scene if hip-hop artist","Target college demographic (large student population)","House music crossover opportunities","Authentic, raw production valued over polish"]},"Houston, TX":{name:"Houston",state_province:"Texas",population_millions:7.1,music_scene_strength:.85,music_industry_presence:"strong",genre_preferences:{pop:.75,rnb:.85,hip_hop:.95,electronic:.7,alternative:.65,latin:.9,country:.7,rock:.6},sonic_profile:{preferred_tempo_range:[65,125],preferred_energy:[.5,.85],bass_culture:"heavy",production_preference:"balanced"},key_venues:["House of Blues Houston","White Oak Music Hall","NRG Stadium"],influential_radio_stations:["97.9 The Box","Mix 96.5","104.9 The Beat"],local_tastemakers:["DJ Screw legacy","Travis Scott camp","Bun B"],music_festivals:["Day For Night","Free Press Summer Fest","Astroworld Festival"],scene_description:"Chopped and screwed originators. Slow, heavy bass culture. Strong Latin influence.",target_demographics:["Hip-hop fans","Car culture enthusiasts","Latin community","Southern rap heads"],best_strategies:["Embrace slow, heavy bass sound","Connect with Houston hip-hop legacy (Screw, UGK influence)","Target Latin demographic","Car audio culture - bass-heavy mixes essential"]},"Seattle, WA":{name:"Seattle",state_province:"Washington",population_millions:4,music_scene_strength:.82,music_industry_presence:"emerging",genre_preferences:{pop:.75,rnb:.7,hip_hop:.75,electronic:.85,alternative:.95,latin:.6,country:.5,rock:.9},sonic_profile:{preferred_tempo_range:[80,125],preferred_energy:[.5,.8],bass_culture:"moderate",production_preference:"raw"},key_venues:["The Crocodile","Neumos","The Showbox","Paramount Theatre"],influential_radio_stations:["KEXP","C89.5","107.7 The End"],local_tastemakers:["KEXP DJs","Sub Pop Records"],music_festivals:["Bumbershoot","Capitol Hill Block Party","Sasquatch!"],scene_description:"Grunge birthplace. Strong indie/alternative scene. Values authenticity over polish.",target_demographics:["Alternative/indie fans","Tech workers","Coffee shop culture","Grunge nostalgia"],best_strategies:["Get airplay on KEXP (highly influential)","Connect with Sub Pop or other Seattle indie labels","Authentic, raw sound preferred","Capitol Hill neighborhood shows build credibility"]},"Phoenix, AZ":{name:"Phoenix",state_province:"Arizona",population_millions:4.9,music_scene_strength:.65,music_industry_presence:"developing",genre_preferences:{pop:.8,rnb:.75,hip_hop:.85,electronic:.8,alternative:.75,latin:.9,country:.75,rock:.8},sonic_profile:{preferred_tempo_range:[85,130],preferred_energy:[.6,.9],bass_culture:"moderate",production_preference:"balanced"},key_venues:["Crescent Ballroom","The Van Buren","Talking Stick Resort Arena"],influential_radio_stations:["Power 98.3","Alt AZ 93.3","La Buena"],local_tastemakers:["Dbacks/Suns halftime shows","Arizona hip-hop scene"],music_festivals:["McDowell Mountain Music Festival","M3F","Phoenix Lights"],scene_description:"Growing market. Strong Latin influence. Desert aesthetic in alternative/electronic scenes.",target_demographics:["Latin community","College students (ASU)","Transplants from CA/Midwest"],best_strategies:["Target large Latin demographic","ASU campus shows (huge college population)","Growing EDM scene (Phoenix Lights fest)","Desert vibes resonate in branding"]},"Portland, OR":{name:"Portland",state_province:"Oregon",population_millions:2.5,music_scene_strength:.78,music_industry_presence:"emerging",genre_preferences:{pop:.7,rnb:.65,hip_hop:.7,electronic:.85,alternative:.95,latin:.55,country:.5,rock:.9},sonic_profile:{preferred_tempo_range:[80,120],preferred_energy:[.4,.75],bass_culture:"light",production_preference:"experimental"},key_venues:["Crystal Ballroom","Doug Fir Lounge","Mississippi Studios","Wonder Ballroom"],influential_radio_stations:["KEXP Seattle reach","94/7 Alternative Portland","XRAY.FM"],local_tastemakers:["Portland indie scene","DIY venue operators"],music_festivals:["Project PABST","MusicfestNW","Pickathon"],scene_description:"Quirky indie scene. Values experimental and DIY. Anti-commercial aesthetic.",target_demographics:["Indie purists","DIY scene","Hipster culture","Environmentalists"],best_strategies:["Embrace DIY and anti-commercial aesthetic","House shows and small venues build credibility","Experimental production valued","Sustainability and social consciousness matter"]}};function b(r,t,e){const n=t.toLowerCase().replace(/\s+/g,"_").replace("&",""),i=(e.genre_preferences[n]||.5)*100,s=r.tempo_bpm>=e.sonic_profile.preferred_tempo_range[0]&&r.tempo_bpm<=e.sonic_profile.preferred_tempo_range[1]?100:70,l=r.energy>=e.sonic_profile.preferred_energy[0]&&r.energy<=e.sonic_profile.preferred_energy[1]?100:70,o=(s+l)/2,p=e.music_scene_strength*20,a=Math.round(i*.5+o*.3+p*1),c=[],m=[];return i>85&&c.push(`Strong ${t} scene`),e.music_industry_presence==="major"&&c.push("Major industry presence"),e.music_scene_strength>.85&&c.push("Vibrant music community"),c.push(e.scene_description),m.push(...e.best_strategies.slice(0,3)),{region:`${e.name}, ${e.state_province}`,match_score:Math.min(a,100),strengths:c,key_venues:e.key_venues.slice(0,4),recommended_actions:m}}function v(r,t){const e=t||"Pop",n=Object.values(f).map(i=>b(r,e,i));return n.sort((i,s)=>s.match_score-i.match_score),{country:"United States",top_subregions:n.slice(0,5),market_overview:`Based on your ${e} track's characteristics, here are the best US cities to target. Consider focusing marketing efforts on these markets first.`}}const h={"North America":{region:"North America",countries:["United States","Canada"],key_cities:["New York","Los Angeles","Toronto","Atlanta","Nashville","Miami"],market_size_rank:1,streaming_penetration:.85,average_revenue_per_user:12.5,genre_preferences:{pop:.9,rnb:.85,hip_hop:.95,electronic:.7,alternative:.75,latin:.75,afrobeats:.6,k_pop:.6,rock:.7,country:.85},sonic_profile:{preferred_tempo_range:[80,140],preferred_energy:[.5,.9],preferred_valence:[.4,.8],bass_preference:"heavy",production_style:"polished"},dominant_platforms:["Spotify","Apple Music","YouTube Music","Amazon Music"],language_openness:.6,trend_adoption_speed:"early",local_artist_preference:.7,best_release_days:["Friday","Thursday"],playlist_culture:"strong",market_insights:["Highly competitive but largest market opportunity","Strong playlist culture - editorial playlist placement crucial","Hip-hop and R&B dominate streaming charts","TikTok integration essential for discovery","Regional differences: South prefers trap/R&B, coasts more diverse"]},"UK & Ireland":{region:"UK & Ireland",countries:["United Kingdom","Ireland"],key_cities:["London","Manchester","Birmingham","Dublin","Glasgow"],market_size_rank:3,streaming_penetration:.88,average_revenue_per_user:11.2,genre_preferences:{pop:.9,rnb:.8,hip_hop:.85,electronic:.9,alternative:.85,latin:.5,afrobeats:.85,k_pop:.55,rock:.75,country:.3},sonic_profile:{preferred_tempo_range:[90,140],preferred_energy:[.5,.9],preferred_valence:[.3,.7],bass_preference:"heavy",production_style:"balanced"},dominant_platforms:["Spotify","Apple Music","YouTube Music","Deezer"],language_openness:.8,trend_adoption_speed:"early",local_artist_preference:.65,best_release_days:["Friday"],playlist_culture:"strong",market_insights:["Strong culture of breaking new artists","BBC Radio 1 and Radio 6 still influential for discovery","Grime, UK drill, and Afrobeats have strong presence","Festival culture impacts summer releases","London-centric but regional scenes emerging (Manchester, Birmingham)"]},"Latin America":{region:"Latin America",countries:["Mexico","Brazil","Colombia","Argentina","Chile"],key_cities:["Mexico City","S√£o Paulo","Buenos Aires","Bogot√°","Santiago"],market_size_rank:4,streaming_penetration:.75,average_revenue_per_user:4.2,genre_preferences:{pop:.85,rnb:.65,hip_hop:.75,electronic:.8,alternative:.7,latin:.98,afrobeats:.5,k_pop:.6,rock:.7,country:.4},sonic_profile:{preferred_tempo_range:[90,130],preferred_energy:[.6,.95],preferred_valence:[.5,.9],bass_preference:"heavy",production_style:"polished"},dominant_platforms:["Spotify","YouTube Music","Deezer","Apple Music"],language_openness:.5,trend_adoption_speed:"mid",local_artist_preference:.8,best_release_days:["Friday","Thursday"],playlist_culture:"strong",market_insights:["Fastest growing streaming market globally","Reggaeton, urbano, and regional Mexican dominate","YouTube extremely important - videos essential","Collaborations with local artists highly effective","WhatsApp sharing culture impacts virality"]},"Western Europe":{region:"Western Europe",countries:["France","Germany","Netherlands","Spain","Italy"],key_cities:["Paris","Berlin","Amsterdam","Madrid","Milan"],market_size_rank:2,streaming_penetration:.8,average_revenue_per_user:9.8,genre_preferences:{pop:.85,rnb:.7,hip_hop:.8,electronic:.95,alternative:.8,latin:.65,afrobeats:.7,k_pop:.5,rock:.75,country:.2},sonic_profile:{preferred_tempo_range:[95,135],preferred_energy:[.5,.85],preferred_valence:[.4,.8],bass_preference:"moderate",production_style:"experimental"},dominant_platforms:["Spotify","Deezer","Apple Music","YouTube Music"],language_openness:.65,trend_adoption_speed:"mid",local_artist_preference:.75,best_release_days:["Friday"],playlist_culture:"strong",market_insights:["Strong electronic music culture, especially Berlin","France has quota system favoring French-language content","Festival season (summer) crucial for visibility","Each country has distinct preferences - localization important","Radio still important in France and Germany"]},"Asia-Pacific":{region:"Asia-Pacific",countries:["South Korea","Japan","Australia","Indonesia","Philippines"],key_cities:["Seoul","Tokyo","Sydney","Jakarta","Manila"],market_size_rank:5,streaming_penetration:.7,average_revenue_per_user:6.5,genre_preferences:{pop:.95,rnb:.75,hip_hop:.7,electronic:.85,alternative:.65,latin:.4,afrobeats:.45,k_pop:.98,rock:.7,country:.3},sonic_profile:{preferred_tempo_range:[90,145],preferred_energy:[.6,.95],preferred_valence:[.5,.9],bass_preference:"moderate",production_style:"polished"},dominant_platforms:["Spotify","Apple Music","YouTube Music","Melon","Line Music"],language_openness:.55,trend_adoption_speed:"early",local_artist_preference:.85,best_release_days:["Friday","Monday"],playlist_culture:"emerging",market_insights:["K-pop production standards influence preferences","Visual content (MVs) absolutely essential","Fan culture extremely engaged and organized","Japan prefers high-quality physical releases","SEA markets growing rapidly, youth-driven"]},"Africa & Middle East":{region:"Africa & Middle East",countries:["Nigeria","South Africa","Kenya","Ghana","UAE"],key_cities:["Lagos","Johannesburg","Nairobi","Accra","Dubai"],market_size_rank:7,streaming_penetration:.45,average_revenue_per_user:2.8,genre_preferences:{pop:.75,rnb:.8,hip_hop:.85,electronic:.65,alternative:.5,latin:.4,afrobeats:.98,k_pop:.4,rock:.4,country:.2},sonic_profile:{preferred_tempo_range:[95,130],preferred_energy:[.6,.95],preferred_valence:[.6,.95],bass_preference:"heavy",production_style:"raw"},dominant_platforms:["Spotify","Apple Music","YouTube Music","Boomplay","Audiomack"],language_openness:.7,trend_adoption_speed:"mid",local_artist_preference:.85,best_release_days:["Friday","Saturday"],playlist_culture:"emerging",market_insights:["Fastest growing youth population globally","Afrobeats and Amapiano dominating globally from this region","WhatsApp and social sharing extremely important","Lower streaming revenue but high engagement","Cross-pollination with diaspora communities crucial"]},Scandinavia:{region:"Scandinavia",countries:["Sweden","Norway","Denmark","Finland"],key_cities:["Stockholm","Oslo","Copenhagen","Helsinki"],market_size_rank:8,streaming_penetration:.92,average_revenue_per_user:11.8,genre_preferences:{pop:.95,rnb:.7,hip_hop:.75,electronic:.9,alternative:.85,latin:.5,afrobeats:.6,k_pop:.5,rock:.8,country:.3},sonic_profile:{preferred_tempo_range:[85,125],preferred_energy:[.5,.85],preferred_valence:[.3,.7],bass_preference:"moderate",production_style:"polished"},dominant_platforms:["Spotify","Apple Music","YouTube Music","Tidal"],language_openness:.9,trend_adoption_speed:"early",local_artist_preference:.6,best_release_days:["Friday"],playlist_culture:"strong",market_insights:["Highest streaming penetration globally","Birthplace of many pop producers and songwriters","Early adopters of new music trends","Strong indie/alternative scene","English-language music widely accepted"]}};function w(r,t){return t||(r.energy>.7&&r.tempo_bpm>120?"electronic":r.speechiness>.3?"hip_hop":r.danceability>.7&&r.energy>.6?"pop":r.energy<.6&&r.valence<.5?"alternative":r.danceability>.5&&r.energy<.7?"rnb":"pop")}function k(r,t,e){const n=t.toLowerCase().replace(/\s+/g,"_").replace("&",""),i=(e.genre_preferences[n]||.5)*100,s=r.tempo_bpm>=e.sonic_profile.preferred_tempo_range[0]&&r.tempo_bpm<=e.sonic_profile.preferred_tempo_range[1]?100:70,l=r.energy>=e.sonic_profile.preferred_energy[0]&&r.energy<=e.sonic_profile.preferred_energy[1]?100:70,o=r.valence>=e.sonic_profile.preferred_valence[0]&&r.valence<=e.sonic_profile.preferred_valence[1]?100:75,p=(s+l+o)/3,a=(10-e.market_size_rank)*10+e.streaming_penetration*30+e.average_revenue_per_user*3+(e.trend_adoption_speed==="early"?20:e.trend_adoption_speed==="mid"?10:5),c=e.language_openness*50+(e.playlist_culture==="strong"?50:e.playlist_culture==="moderate"?30:20),m=i*.4+p*.3+a*.2+c*.1,u=[],g=[],d=[];return i>80&&u.push(`Strong ${t} market presence`),e.streaming_penetration>.8&&u.push("High streaming adoption"),e.trend_adoption_speed==="early"&&u.push("Early trend adopters - good for breaking new sounds"),e.playlist_culture==="strong"&&(u.push("Strong playlist culture"),d.push("Focus on playlist pitching and curator relationships")),e.language_openness<.6&&g.push("Consider local language versions or features"),e.local_artist_preference>.75&&(g.push("High preference for local artists - collaboration recommended"),d.push("Partner with local artists or producers")),e.average_revenue_per_user<5&&g.push("Lower ARPU - focus on volume and engagement over revenue"),d.push(`Primary platforms: ${e.dominant_platforms.slice(0,2).join(", ")}`),d.push(`Best release day: ${e.best_release_days[0]}`),{region:e.region,match_score:Math.round(m),match_factors:{genre_fit:Math.round(i),sonic_fit:Math.round(p),market_opportunity:Math.round(a),cultural_fit:Math.round(c)},strengths:u,considerations:g,recommended_strategy:d}}function M(r,t){const e=w(r,t),n=Object.values(h).map(d=>k(r,e,d));n.sort((d,_)=>_.match_score-d.match_score);const i=n.slice(0,3),s=n.slice(3,6),l=n.reduce((d,_)=>d+_.match_score,0)/n.length,o=Math.round(l),p=i.flatMap(d=>h[d.region].countries.slice(0,2)),a=[];i[0].match_score>85&&a.push(`üéØ Excellent fit for ${i[0].region} - prioritize this market`),o>75?a.push("üåç High global appeal - consider simultaneous multi-region release"):o<55&&a.push("üéØ Niche appeal - focus on 1-2 key markets initially");const c=n.find(d=>["Latin America","Africa & Middle East","Asia-Pacific"].includes(d.region)&&d.match_score>70);c&&a.push(`üìà Strong potential in ${c.region} - fast-growing market`);const m=i.map(d=>{const _=[];return h[d.region].playlist_culture==="strong"&&_.push("Editorial playlists","Algorithmic playlists"),r.danceability>.7&&_.push("Workout & party playlists"),r.valence<.5&&_.push("Mood & chill playlists"),r.energy>.7&&_.push("High-energy & hype playlists"),{region:d.region,playlist_types:_}}),u=[],g=i.find(d=>d.region==="North America");return g&&g.match_score>60&&u.push(v(r,e)),{primary_markets:i,secondary_markets:s,global_appeal_score:o,recommended_territories:p,market_strategy_insights:a,playlist_targeting:m,subregional_analysis:u.length>0?u:void 0}}const y={"R&B":{genre:"R&B",tempo_bpm:[70,110],danceability:[.4,.8],energy:[.3,.7],valence:[.2,.7],loudness_db:[-8,-5],dynamic_range_db:[6,10],stereo_width:[.6,.9],frequency_targets:{bass_prominence:[-3,0],mid_clarity:[-2,1],high_presence:[-4,-1]},typical_intro_seconds:[5,15],typical_duration_seconds:[180,240],reference_tracks:["SZA - Good Days","H.E.R. - Focus","Summer Walker - Playing Games"]},Pop:{genre:"Pop",tempo_bpm:[90,130],danceability:[.5,.9],energy:[.5,.9],valence:[.4,.8],loudness_db:[-6,-4],dynamic_range_db:[5,9],stereo_width:[.7,.95],frequency_targets:{bass_prominence:[-2,1],mid_clarity:[-1,2],high_presence:[-2,0]},typical_intro_seconds:[3,10],typical_duration_seconds:[165,210],reference_tracks:["Dua Lipa - Levitating","The Weeknd - Blinding Lights","Doja Cat - Kiss Me More"]},"Hip Hop":{genre:"Hip Hop",tempo_bpm:[70,140],danceability:[.6,.9],energy:[.6,.9],valence:[.3,.8],loudness_db:[-7,-4],dynamic_range_db:[4,8],stereo_width:[.5,.8],frequency_targets:{bass_prominence:[0,3],mid_clarity:[-1,1],high_presence:[-3,-1]},typical_intro_seconds:[0,8],typical_duration_seconds:[150,210],reference_tracks:["Drake - God's Plan","Kendrick Lamar - HUMBLE.","Travis Scott - SICKO MODE"]},Electronic:{genre:"Electronic",tempo_bpm:[100,150],danceability:[.7,.95],energy:[.7,.95],valence:[.4,.9],loudness_db:[-6,-3],dynamic_range_db:[4,8],stereo_width:[.8,1],frequency_targets:{bass_prominence:[-1,2],mid_clarity:[0,2],high_presence:[-1,1]},typical_intro_seconds:[8,30],typical_duration_seconds:[180,300],reference_tracks:["Disclosure - Latch","ODESZA - Say My Name","Flume - Never Be Like You"]},Alternative:{genre:"Alternative",tempo_bpm:[80,120],danceability:[.3,.7],energy:[.4,.8],valence:[.2,.7],loudness_db:[-9,-6],dynamic_range_db:[7,12],stereo_width:[.6,.9],frequency_targets:{bass_prominence:[-2,1],mid_clarity:[-1,2],high_presence:[-2,1]},typical_intro_seconds:[5,20],typical_duration_seconds:[180,270],reference_tracks:["Phoebe Bridgers - Kyoto","Tame Impala - The Less I Know The Better","Glass Animals - Heat Waves"]}};async function S(r){const t=r.name.toLowerCase(),e=await x(r),n=t.includes("mix")||t.includes("master"),i=t.includes("demo")||t.includes("rough");return{tempo_bpm:80+Math.random()*60,danceability:.4+Math.random()*.5,energy:i?.5+Math.random()*.3:.6+Math.random()*.35,valence:.3+Math.random()*.5,acousticness:Math.random()*.4,instrumentalness:Math.random()*.3,speechiness:.05+Math.random()*.15,loudness_db:i?-12-Math.random()*4:-8-Math.random()*4,dynamic_range_db:i?8+Math.random()*4:6+Math.random()*4,stereo_width:n?.7+Math.random()*.25:.5+Math.random()*.3,peak_db:-.1-Math.random()*.5,rms_db:-12-Math.random()*6,crest_factor:10+Math.random()*8,frequency_balance:{sub_bass:.6+Math.random()*.3,bass:.7+Math.random()*.25,low_mid:.65+Math.random()*.25,mid:.75+Math.random()*.2,high_mid:.7+Math.random()*.25,presence:.65+Math.random()*.3,brilliance:.6+Math.random()*.35},duration_seconds:e,intro_length_seconds:5+Math.random()*10,outro_length_seconds:10+Math.random()*15,key:Math.floor(Math.random()*12),mode:Math.random()>.5?"major":"minor",key_confidence:.7+Math.random()*.3}}async function x(r){return new Promise(t=>{const e=new Audio;e.onloadedmetadata=()=>{t(e.duration)},e.onerror=()=>{t(180+Math.random()*60)},e.src=URL.createObjectURL(r)})}function A(r){return y[r]||y.Pop}function C(r,t){const e={loudness:T(r,t),dynamics:F(r,t),frequency_balance:B(r),stereo_imaging:L(r,t),genre_alignment:E(r,t),commercial_readiness:P(r,t)};return{overall:Math.round((e.loudness*.2+e.dynamics*.15+e.frequency_balance*.25+e.stereo_imaging*.15+e.genre_alignment*.15+e.commercial_readiness*.1)*100),breakdown:e}}function T(r,t){const[e,n]=t.loudness_db,i=(e+n)/2,s=(n-e)/2,l=Math.abs(r.loudness_db-i);return Math.max(0,1-l/(s*2))}function F(r,t){if(!r.dynamic_range_db)return .7;const[e,n]=t.dynamic_range_db,i=r.dynamic_range_db;return i>=e&&i<=n?1:i<e?Math.max(0,i/e):Math.max(0,1-(i-n)/n)}function B(r,t){if(!r.frequency_balance)return .7;const e=r.frequency_balance,n=Object.values(e),i=n.reduce((a,c)=>a+c,0)/n.length,s=n.reduce((a,c)=>a+Math.pow(c-i,2),0)/n.length,l=Math.max(0,1-s*2),o=e.bass>.5?1:e.bass*2,p=e.presence>.5?1:e.presence*2;return l*.5+o*.25+p*.25}function L(r,t){if(!r.stereo_width)return .7;const[e,n]=t.stereo_width,i=r.stereo_width;return i>=e&&i<=n?1:i<e?i/e:Math.max(0,1-(i-n)/(1-n))}function E(r,t){let e=0,n=0;const[i,s]=t.tempo_bpm;if(r.tempo_bpm>=i&&r.tempo_bpm<=s)e+=1;else{const c=Math.min(Math.abs(r.tempo_bpm-i),Math.abs(r.tempo_bpm-s));e+=Math.max(0,1-c/30)}n++;const[l,o]=t.energy;r.energy>=l&&r.energy<=o?e+=1:e+=.5,n++;const[p,a]=t.danceability;return r.danceability>=p&&r.danceability<=a?e+=1:e+=.5,n++,e/n}function P(r,t){let e=0;r.loudness_db>=-9&&r.loudness_db<=-4?e+=.3:r.loudness_db>=-12&&r.loudness_db<=-3&&(e+=.15),r.dynamic_range_db&&r.dynamic_range_db>=5&&r.dynamic_range_db<=10?e+=.3:r.dynamic_range_db&&r.dynamic_range_db>=4&&(e+=.15),r.stereo_width&&r.stereo_width>=.6&&r.stereo_width<=.9?e+=.2:r.stereo_width&&r.stereo_width>=.5&&(e+=.1);const[n,i]=t.typical_duration_seconds;return r.duration_seconds>=n&&r.duration_seconds<=i?e+=.2:r.duration_seconds>=n-30&&r.duration_seconds<=i+30&&(e+=.1),Math.min(1,e)}function $(r,t){const e=[],[n,i]=t.loudness_db;if(r.loudness_db<n-3?e.push({category:"loudness",severity:"critical",title:"Mix is Too Quiet",description:"Your mix is significantly quieter than commercial standards for this genre.",current_value:`${r.loudness_db.toFixed(1)} LUFS`,target_value:`${n} to ${i} LUFS`,recommendations:["Increase overall gain during mastering","Use a limiter to increase perceived loudness","Check if individual tracks are sitting too low in the mix","Consider parallel compression to add density"],technical_details:"LUFS (Loudness Units Full Scale) is the standard for measuring perceived loudness. Streaming platforms normalize to around -14 LUFS, but your mix should be competitive before normalization."}):r.loudness_db>i+2&&e.push({category:"loudness",severity:"warning",title:"Mix May Be Over-Compressed",description:"Your mix is very loud, which might indicate over-compression and loss of dynamics.",current_value:`${r.loudness_db.toFixed(1)} LUFS`,target_value:`${n} to ${i} LUFS`,recommendations:["Reduce limiter threshold/gain","Allow more dynamic range in the mix","Check for excessive compression on the master bus","Trust streaming platform normalization - you don't need to be the loudest"],technical_details:"Excessive loudness often comes at the cost of punch and dynamics. Modern streaming normalizes loudness anyway."}),r.dynamic_range_db&&r.dynamic_range_db<t.dynamic_range_db[0]-2&&e.push({category:"dynamics",severity:r.dynamic_range_db<4?"critical":"warning",title:"Limited Dynamic Range",description:"Your mix lacks dynamic contrast, which can make it sound flat and fatiguing.",current_value:`${r.dynamic_range_db.toFixed(1)} dB`,target_value:`${t.dynamic_range_db[0]} to ${t.dynamic_range_db[1]} dB`,recommendations:["Reduce compression on individual tracks","Use less aggressive mastering limiting","Preserve transients by using transient shapers carefully","Allow choruses to be louder than verses for impact"],technical_details:"Dynamic range is the difference between the quietest and loudest parts. Too little makes mixes sound lifeless."}),r.frequency_balance){const a=r.frequency_balance;a.bass<.5&&e.push({category:"frequency_balance",severity:"warning",title:"Weak Low End",description:"Bass frequencies are under-represented, which can make the mix sound thin.",current_value:"Below target",recommendations:["Boost bass and sub-bass frequencies (60-250 Hz)","Check if bass instruments are sitting properly in the mix","Use EQ to add weight to kick and bass","Consider layering bass elements for more presence"]}),a.bass>.9&&e.push({category:"frequency_balance",severity:"warning",title:"Excessive Low End",description:"Too much bass can make the mix sound muddy and translate poorly on small speakers.",current_value:"Above target",recommendations:["Use high-pass filters on non-bass elements","Reduce low-mid buildup (200-400 Hz)","Check bass and kick relationship - might be clashing","Reference on multiple speaker systems"]}),a.brilliance<.5&&e.push({category:"frequency_balance",severity:"suggestion",title:"Lacking High-End Sparkle",description:"High frequencies could use more presence for clarity and air.",current_value:"Below target",recommendations:["Add subtle high-shelf boost (8-12 kHz)","Use saturation or harmonic exciters for highs","Check if cymbals and vocals have enough top-end","Consider de-essing before adding highs"]})}r.stereo_width&&(r.stereo_width<.4?e.push({category:"stereo_imaging",severity:"warning",title:"Narrow Stereo Image",description:"The mix sounds too centered and lacks width.",current_value:`${(r.stereo_width*100).toFixed(0)}%`,target_value:`${(t.stereo_width[0]*100).toFixed(0)}-${(t.stereo_width[1]*100).toFixed(0)}%`,recommendations:["Pan instruments across the stereo field","Use stereo widening on appropriate tracks","Double-track guitars/vocals and pan them","Use stereo reverb and delay effects"]}):r.stereo_width>.95&&e.push({category:"stereo_imaging",severity:"suggestion",title:"Possibly Over-Widened",description:"Extreme width can cause phase issues and weak center.",current_value:`${(r.stereo_width*100).toFixed(0)}%`,target_value:`${(t.stereo_width[0]*100).toFixed(0)}-${(t.stereo_width[1]*100).toFixed(0)}%`,recommendations:["Keep bass and kick centered (mono below 150 Hz)","Check mono compatibility","Avoid excessive stereo widening plugins","Ensure lead vocals are centered"]}));const[s,l]=t.tempo_bpm;(r.tempo_bpm<s-10||r.tempo_bpm>l+10)&&e.push({category:"tempo",severity:"suggestion",title:"Tempo Outside Genre Norm",description:`This tempo is unusual for ${t.genre}. This could be intentional, but be aware it may affect playlisting.`,current_value:`${Math.round(r.tempo_bpm)} BPM`,target_value:`${s}-${l} BPM typical`,recommendations:["Consider if tempo serves the song or hinders it","If intentional, embrace it as a unique characteristic","Test with target audience for feedback","Pitch to curators who appreciate tempo experimentation"]});const[o,p]=t.typical_duration_seconds;return r.duration_seconds>p+30?e.push({category:"structure",severity:"suggestion",title:"Song is Quite Long",description:"Longer songs can have lower completion rates on streaming platforms.",current_value:`${Math.floor(r.duration_seconds/60)}:${String(Math.floor(r.duration_seconds%60)).padStart(2,"0")}`,target_value:`${Math.floor(o/60)}:${String(Math.floor(o%60)).padStart(2,"0")} - ${Math.floor(p/60)}:${String(Math.floor(p%60)).padStart(2,"0")}`,recommendations:["Consider editing for a tighter arrangement","Ensure every section serves the song","Check if intro/outro can be shortened","Long songs work if they maintain engagement throughout"]}):r.duration_seconds<o-30&&e.push({category:"structure",severity:"suggestion",title:"Song is Quite Short",description:"Very short songs might not allow enough time for listener engagement.",current_value:`${Math.floor(r.duration_seconds/60)}:${String(Math.floor(r.duration_seconds%60)).padStart(2,"0")}`,target_value:`${Math.floor(o/60)}:${String(Math.floor(o%60)).padStart(2,"0")} - ${Math.floor(p/60)}:${String(Math.floor(p%60)).padStart(2,"0")}`,recommendations:["Consider if the song feels complete","Short songs can work great if intentional","Ensure you have enough material for a satisfying listen","TikTok-friendly short format can be strategic"]}),e}function D(r,t,e){const n=[];if(e.breakdown.loudness>=.8&&n.push("‚ú® Excellent loudness levels - competitive and professional"),e.breakdown.dynamics>=.8&&n.push("üéµ Great dynamic range - punchy and engaging without over-compression"),e.breakdown.frequency_balance>=.8&&n.push("üéöÔ∏è Well-balanced frequency spectrum - clear and full-bodied"),e.breakdown.stereo_imaging>=.8&&n.push("üéß Excellent stereo image - wide but focused with good center"),e.breakdown.genre_alignment>=.8&&n.push(`üéØ Strong ${t.genre} characteristics - fits the genre well`),e.breakdown.commercial_readiness>=.8&&n.push("üíé Commercial-ready production quality"),r.stereo_width&&r.stereo_width>=.75&&r.stereo_width<=.85&&n.push("üåü Perfect stereo width - immersive yet mono-compatible"),r.frequency_balance){const i=r.frequency_balance;i.mid>=.7&&i.presence>=.7&&n.push("üé§ Excellent midrange clarity - vocals and instruments will cut through")}return n}function R(r,t){return t.filter(e=>e.severity==="critical").length,t.filter(e=>e.severity==="warning").length,r.overall>=90?"Outstanding! This mix is release-ready and competitive with commercial standards. Minor refinements could take it to the next level, but you're in excellent shape.":r.overall>=80?"Great work! This mix is very close to professional standards. Address the key issues identified and you'll have a polished, competitive track.":r.overall>=70?"Good foundation! The core elements are there, but several improvements will help this mix compete with commercial releases. Focus on the critical and warning issues first.":r.overall>=60?"Solid start! This mix has potential but needs significant work in several areas. Prioritize the critical issues, then work through the warnings systematically.":"This mix needs substantial work to reach professional standards. Focus on fundamentals: loudness, frequency balance, and dynamics. Consider working with an experienced mix engineer or taking time to study reference tracks."}function H(r,t){const e=[],n=r.filter(s=>s.severity==="critical"),i=r.filter(s=>s.severity==="warning");return n.length>0&&e.push(`üî¥ Address ${n.length} critical issue${n.length>1?"s":""} first: ${n.map(s=>s.category).join(", ")}`),i.length>0&&e.push(`‚ö†Ô∏è Fix ${i.length} warning${i.length>1?"s":""}: ${i.slice(0,3).map(s=>s.category).join(", ")}`),t.breakdown.frequency_balance<.7&&e.push("üìä Analyze frequency spectrum with a visual EQ to identify problem areas"),t.breakdown.loudness<.7&&e.push("üîä Study mastering techniques or consider hiring a mastering engineer"),e.push("üéµ A/B reference your mix against 3-5 commercial tracks in your genre"),e.push("üëÇ Take breaks and return with fresh ears before making final decisions"),t.overall<80&&e.push("üéì Consider getting feedback from experienced mixing engineers or producers"),e}function z(r,t,e){const n=[];switch(r){case"rough-mix":n.push("üéöÔ∏è Focus on getting a balanced level for all tracks first"),n.push("üéØ Set rough panning positions to create space"),n.push("‚úÇÔ∏è Use high-pass filters to clean up low-end mud"),n.push("‚è∏Ô∏è Don't worry about perfection yet - rough balance is the goal"),t.some(i=>i.category==="loudness")&&n.push("üí° Loudness will be addressed in mastering - focus on balance and clarity for now");break;case"mixing":n.push("üéõÔ∏è Now is the time for EQ, compression, and creative effects"),n.push("üîä Check your mix at different volumes to ensure translation"),n.push("üìê Use automation to bring out important elements"),n.push("üé® Add depth with reverb and delay, but don't overdo it"),t.some(i=>i.category==="frequency_balance")&&n.push("üéöÔ∏è Address frequency issues now - they'll be harder to fix in mastering");break;case"mix-review":n.push("üëÇ Listen on multiple systems: headphones, car, phone, studio monitors"),n.push("‚è∞ Take a 24-hour break and return with fresh ears"),n.push("üìä Compare against reference tracks at matched volumes"),n.push("‚úÖ Make final tweaks but avoid over-analyzing"),n.push("üíæ Save multiple versions before moving to mastering");break;case"pre-master":n.push("üéØ Ensure your mix has appropriate headroom (-6 to -3 dBFS peak)"),n.push("üîç Check for any clicks, pops, or digital artifacts"),n.push("‚úÇÔ∏è Verify fade-ins/fade-outs are clean"),n.push("üìù Document any specific mastering requests"),e.breakdown.dynamics<.7&&n.push("‚ö†Ô∏è Your mix may be over-compressed - consider backing off before mastering");break;case"mastered":n.push("üéß Verify the master translates well across all playback systems"),n.push("üìä Check loudness against streaming platform targets (-14 LUFS for most)"),n.push("‚úÖ Ensure no clipping or distortion was introduced"),n.push("üíæ Keep your pre-master mix file in case revisions are needed");break;case"not-sure":n.push("üìç Identify your current stage to get more specific recommendations"),n.push("üéØ If you're still adjusting levels and EQ, you're likely in mixing stage"),n.push("üîä If you're happy with the mix and want it louder, you're ready for mastering");break}return n}function I(r,t){const e=["loudness","mastering"];switch(t){case"rough-mix":case"mixing":return r.map(n=>n.category==="loudness"&&n.severity!=="critical"?{...n,severity:"suggestion",description:n.description+" (Note: Final loudness will be addressed in mastering)"}:n);case"mix-review":case"pre-master":return r.map(n=>n.category==="loudness"?{...n,description:n.description+" (Will be addressed in mastering stage)"}:n);case"mastered":return r;case"not-sure":default:return r.map(n=>e.includes(n.category)?{...n,description:n.description+" (If not yet mastered, this will be addressed in that stage)"}:n)}}function G(r){return r.map((t,e)=>({id:`checklist-${Date.now()}-${e}`,category:t.category,title:t.title,priority:t.severity==="critical"?"high":t.severity==="warning"?"medium":"low",completed:!1,notes:t.recommendations.slice(0,2).join("; ")}))}function N(r,t){const e=t.score.overall-r.score.overall,n=[],i=[];Object.keys(t.score.breakdown).forEach(c=>{const m=r.score.breakdown[c],u=t.score.breakdown[c];u>m+.05?n.push(c):u<m-.05&&i.push(c)});const s=r.issues.map(c=>c.category),l=t.issues.map(c=>c.category),o=s.filter(c=>!l.includes(c)),p=l.filter(c=>!s.includes(c));let a="";return e>5?a=`Great progress! Your overall score improved by ${e.toFixed(0)} points. `:e>0?a=`Good work! Small improvements adding up to +${e.toFixed(0)} points. `:e<-5?a=`Score decreased by ${Math.abs(e).toFixed(0)} points. Review recent changes. `:e<0?a=`Slight decrease of ${Math.abs(e).toFixed(0)} points. `:a="Score remained stable. ",n.length>0&&(a+=`Improvements in: ${n.join(", ")}. `),o.length>0&&(a+=`Resolved ${o.length} issue${o.length>1?"s":""}! `),i.length>0&&(a+=`Watch out for: ${i.join(", ")}. `),{score_improvement:e,improved_categories:n,regressed_categories:i,resolved_issues:o,new_issues:p,summary:a.trim()}}async function q(r,t="Pop",e="not-sure",n){const i=await S(r),s=A(t),l=n?{...s,...n}:s,o=C(i,l),p=$(i,l),a=I(p,e),c=D(i,l,o),m=R(o,a),u=H(a,o),g=z(e,a,o),d=M(i,t);return{file_info:{name:r.name,size_bytes:r.size,format:r.type},mixing_stage:e,audio_features:i,benchmarks_used:l,score:o,issues:a,strengths:c,overall_assessment:m,next_steps:u,stage_appropriate_tips:g,similar_reference_tracks:l.reference_tracks,regional_analysis:d,analysis_timestamp:new Date().toISOString()}}async function K(r,t=15e3){const e=new Worker(new URL("/soundsexpensive/assets/mixWorker-B40eM9zM.js",import.meta.url),{type:"module"}),n=Math.random().toString(36).slice(2);return new Promise((i,s)=>{const l=()=>e.terminate(),o=setTimeout(()=>{l(),s(new Error("Mix worker timed out"))},t);e.onmessage=p=>{const a=p.data;a.id===n&&(clearTimeout(o),l(),a.ok?i(a.result):s(new Error(a.error||"Mix worker failed")))},e.onerror=()=>{clearTimeout(o),l(),s(new Error("Mix worker error"))},e.postMessage({id:n,type:"compute",payload:r})})}export{y as M,S as a,q as b,N as c,G as g,K as r};
